/* NEW: å…¨å±€ Box-Sizing ä¿®å¤ï¼Œé˜²æ­¢ Padding å¯¼è‡´çš„æº¢å‡ºé—®é¢˜ */
*, *::before, *::after {
    box-sizing: border-box;
}

/* C. ä¸»é¢˜è‰²å®šä¹‰ */
:root {
    --color-primary: #00796b; /* é²œç»¿è‰² */
    --color-primary-light: #e0f2f1; /* æµ…ç»¿è‰² */
    --color-link-dark: #80cbc4; /* æš—è‰²æ¨¡å¼ä¸‹çš„é“¾æ¥é¢œè‰² */
    
    /* MODIFIED: æ ¸å¿ƒé€šç”¨å˜é‡å®šä¹‰ - é»˜è®¤ä½¿ç”¨æµ…è‰²å€¼ */
    --color-text: #333; /* æµ…è‰²æ¨¡å¼æ–‡æœ¬ - ä½œä¸ºé€šç”¨æ–‡æœ¬è‰² */
    --color-background: #f7f7f7; /* é€šç”¨èƒŒæ™¯è‰²ï¼Œé»˜è®¤æµ…è‰² */
    --color-card: #ffffff; /* é€šç”¨å¡ç‰‡èƒŒæ™¯ï¼Œé»˜è®¤æµ…è‰² */
    --color-border: #eee; /* é€šç”¨è¾¹æ¡†é¢œè‰²ï¼Œé»˜è®¤æµ…è‰² */
    --shadow: 0 2px 5px rgba(0,0,0,0.05); /* é€šç”¨é˜´å½±ï¼Œé»˜è®¤æµ…è‰² */
    
    --color-text-dark: #e0e0e0; /* æ·±è‰²æ¨¡å¼æ–‡æœ¬ */
    --color-background-light: #f7f7f7; /* æµ…ç°åº•è‰²å¢å¼ºå¡ç‰‡æ•ˆæœ */
    --color-background-dark: #1a1a1a; /* æ·±è‰²èƒŒæ™¯ */
    --color-card-light: #ffffff; /* æµ…è‰²å¡ç‰‡èƒŒæ™¯ */
    --color-card-dark: #2b2b2b; /* æ·±è‰²å¡ç‰‡èƒŒæ™¯ */
    --color-border-light: #eee;
    --color-border-dark: #444;
    --shadow-light: 0 2px 5px rgba(0,0,0,0.05); /* æŸ”å’Œé˜´å½± - å‡å° */
    --shadow-hover: 0 4px 10px rgba(0,0,0,0.1); /* æå‡é˜´å½± - å‡å° */
    --shadow-dark: 0 2px 5px rgba(0,0,0,0.3); /* æš—è‰²æŸ”å’Œé˜´å½± */
    --shadow-dark-hover: 0 4px 10px rgba(0,0,0,0.5); /* æš—è‰²æå‡é˜´å½± */
    --color-nav-active-bg-light: var(--color-primary); /* å¯¼èˆªæ´»åŠ¨èƒŒæ™¯ */
    --color-nav-active-text-light: white; /* å¯¼èˆªæ´»åŠ¨æ–‡æœ¬ */
    --color-nav-active-bg-dark: var(--color-link-dark);
    --color-nav-active-text-dark: var(--color-card-dark);
    /* NEW READABILITY 2.1: Blockquote Backgrounds */
    --color-quote-light: rgba(0, 121, 107, 0.04); /* 4% primary tint */
    --color-quote-dark: rgba(128, 203, 196, 0.1) ; /* 10% dark link tint */
    /* NEW: è¡¨æ ¼æ–‘é©¬çº¿é¢œè‰² */
    --color-table-stripe-light: #fcfcfc;
    --color-table-stripe-dark: #3a3a3a;
    
    /* NEW FIX: å›ºå®šå…ƒç´ é¢œè‰²å˜é‡ (Default: Light Mode) */
    --color-code-background: #f5f5f5; /* ä»£ç å—èƒŒæ™¯ */
    --color-inline-code-background: #eee; /* è¡Œå†…ä»£ç èƒŒæ™¯ */
    --color-inline-code-text: #cc542e; /* è¡Œå†…ä»£ç æ–‡å­— */
    --color-scrollbar-thumb: #ccc; /* æ»šåŠ¨æ¡æ»‘å— */

    /* NEW UX SUGGESTION 2: å¼•ç”¨å—æ–‡å­—é¢œè‰²å˜é‡ */
    --color-quote-text-light: #4c4c4c;
    /* ä¿®æ­£å»ºè®® 1: ç¡®ä¿æ·±è‰²æ¨¡å¼ä¸‹å¼•ç”¨å—æ–‡å­—é¢œè‰²æœ‰å®šä¹‰å’Œå€¼ */ 
    --color-quote-text-dark: #b0b0b0; /* è°ƒæš—ä»¥æé«˜æ·±è‰²èƒŒæ™¯å¯¹æ¯”åº¦ */
    
    /* NEW UX SUGGESTION 4: TOC æ¿€æ´»èƒŒæ™¯è‰² */
    --color-toc-active-bg-light: var(--color-primary-light);
    --color-toc-active-bg-dark: #3a3a3a;

    /* NEW UX SUGGESTION 5: æ–‡ç« å¤´éƒ¨ä¿¡æ¯åŒºèƒŒæ™¯è‰² */
    --color-header-info-bg-light: var(--color-background-light);
    --color-header-info-bg-dark: #222222;

    /* NEW UX SUGGESTION 6: æ ‡ç­¾å¾½ç« é¢œè‰² */
    --color-tag-bg-light: #f0f0f0;
    --color-tag-text-light: #555;
    --color-tag-bg-dark: #444;
    --color-tag-text-dark: #ccc;

    /* NEW UX SUGGESTION 2.2: Callout/Tip Colors (Light Mode) */
    --color-tip-bg-light: #e8f5e9; /* Light Green */
    --color-tip-text-light: #2e7d32; /* Dark Green */
    --color-warning-bg-light: #fff8e1; /* Light Yellow */
    --color-warning-text-light: #f57f17; /* Dark Yellow */
    --color-danger-bg-light: #ffebee; /* Light Red */
    --color-danger-text-light: #c62828; /* Dark Red */
    --color-callout-border-light: #ccc;
    
    /* NEW UX SUGGESTION 2.2: Callout/Tip Colors (Dark Mode) */
    --color-tip-bg-dark: #223623;
    --color-tip-text-dark: #a5d6a7;
    --color-warning-bg-dark: #403a22;
    --color-warning-text-dark: #ffd54f;
    --color-danger-bg-dark: #3b2020;
    --color-danger-text-dark: #e57373;
}

/* D. è‡ªåŠ¨æ·±è‰²æ¨¡å¼åˆ‡æ¢ï¼šä½¿ç”¨ prefers-color-scheme (NEW FIX) */
@media (prefers-color-scheme: dark) {
    :root {
        /* æ ¸å¿ƒä¸»é¢˜è‰²åˆ‡æ¢ï¼šå°†æ·±è‰²å€¼èµ‹ç»™é€šç”¨å˜é‡ */
        --color-text: var(--color-text-dark); 
        --color-background: var(--color-background-dark); 
        --color-card: var(--color-card-dark); 
        --color-border: var(--color-border-dark); 
        --shadow: var(--shadow-dark); 
        --shadow-hover: var(--shadow-dark-hover); 
        
        /* ç‰¹æ®Šå…ƒç´ é¢œè‰²åˆ‡æ¢ */
        --color-quote: var(--color-quote-dark); 
        
        /* NEW FIX: å®šä¹‰æ·±è‰²æ¨¡å¼ä¸‹çš„å›ºå®šå…ƒç´ é¢œè‰² */
        --color-code-background: #2b2b2b; 
        --color-inline-code-background: #3a3a3a; 
        --color-inline-code-text: var(--color-link-dark); 
        --color-scrollbar-thumb: #555; 
        
        /* NEW UX SUGGESTION 2: å¼•ç”¨å—æ–‡å­—é¢œè‰²å˜é‡ */
        /* ä¿®æ­£å»ºè®® 1: åœ¨æ·±è‰²æ¨¡å¼ä¸‹åˆ‡æ¢å¼•ç”¨å—æ–‡å­—é¢œè‰² */
        --color-quote-text-light: var(--color-quote-text-dark); /* ä½¿ç”¨æš—è‰²çš„å€¼ */

        /* NEW UX SUGGESTION 4: TOC æ¿€æ´»èƒŒæ™¯è‰² */
        --color-toc-active-bg-light: var(--color-toc-active-bg-dark);
        
        /* NEW UX SUGGESTION 5: æ–‡ç« å¤´éƒ¨ä¿¡æ¯åŒºèƒŒæ™¯è‰² */
        --color-header-info-bg-light: var(--color-header-info-bg-dark);

        /* NEW UX SUGGESTION 6: æ ‡ç­¾å¾½ç« é¢œè‰² */
        --color-tag-bg-light: var(--color-tag-bg-dark);
        --color-tag-text-light: var(--color-tag-text-dark);

        /* NEW UX SUGGESTION 2.2: Callout/Tip Colors Switch */
        --color-tip-bg-light: var(--color-tip-bg-dark);
        --color-tip-text-light: var(--color-tip-text-dark);
        --color-warning-bg-light: var(--color-warning-bg-dark);
        --color-warning-text-light: var(--color-warning-text-dark);
        --color-danger-bg-light: var(--color-danger-bg-dark);
        --color-danger-text-light: var(--color-danger-text-dark);
        --color-callout-border-light: var(--color-border-dark);
    }
    
    /* MODIFIED: å¤´éƒ¨å¯¼èˆªæ æ·±è‰²æ¨¡å¼é€‚é…å’Œæ¨¡ç³Šæ•ˆæœ (è§£å†³é—®é¢˜ 2 å’Œ 8) */
    header {
        /* æ·±è‰²æ¨¡å¼ä¸‹çš„èƒŒæ™¯å’Œè¾¹æ¡† */
        background-color: rgba(43, 43, 43, 0.95); /* ä½¿ç”¨ç•¥é€æ˜çš„å¡ç‰‡èƒŒæ™¯ */
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.4);
        /* å¤´éƒ¨åœ†è§’å·²åœ¨ base header ä¸­å®šä¹‰ */
    }
    nav a {
        color: var(--color-text-dark); 
    }
    nav a:hover, nav a.active-nav-link {
        background-color: var(--color-link-dark);
        color: var(--color-card-dark); 
        box-shadow: 0 2px 5px rgba(128, 203, 196, 0.3); /* æš—è‰²é˜´å½±æ•ˆæœ */
    }
    nav a.active-nav-link {
        /* ç¡®ä¿æ¿€æ´»æ€æ‚¬åœæ—¶ä¸æ”¹å˜é¢œè‰² */
        background-color: var(--color-link-dark);
    }
    
    /* MODIFIED: ç¡®ä¿ body ä½¿ç”¨å˜é‡ */
    body {
        background-color: var(--color-background);
        color: var(--color-text);
    }
    
    /* NEW FIX: ç¡®ä¿é“¾æ¥å’Œå¼•ç”¨å—åœ¨æ·±è‰²æ¨¡å¼ä¸‹çš„é¢œè‰²è°ƒæ•´ */
    a:link, a:visited { 
        color: var(--color-link-dark); /* éæ–‡ç« å†…å®¹é“¾æ¥ä½¿ç”¨ link-dark */
    }
    a:hover {
        color: var(--color-primary); 
        text-decoration: underline;
    }

    /* æ–‡ç« å†…é“¾æ¥é¢œè‰² */
    .post-content a:link, .post-content a:visited {
        color: var(--color-link-dark); /* æ–‡ç« å†…é“¾æ¥ä½¿ç”¨ link-dark */
        border-bottom: 1px dotted var(--color-link-dark); 
    }
    .post-content a:hover {
        color: var(--color-primary); /* æ‚¬åœä½¿ç”¨ primary */
        border-bottom: 1px solid var(--color-primary); 
    }
    
    /* å¼•ç”¨å—çš„æ–‡å­—é¢œè‰²åˆ‡æ¢ */
    blockquote {
        /* ä¿®æ­£å»ºè®® 1: ä½¿ç”¨æ·±è‰²æ¨¡å¼ä¸‹è®¾ç½®çš„å¼•ç”¨å—æ–‡å­—é¢œè‰² */
        color: var(--color-quote-text-dark); 
    }

    /* ä¿®æ­£å»ºè®® 2: ä¸ºæ·±è‰²æ¨¡å¼ä¸‹çš„å›¾ç‰‡æ·»åŠ æŸ”å’Œè¾¹æ¡†å’Œé˜´å½± */
    .post-content img {
        border: 1px solid var(--color-border-dark);
        background-color: var(--color-card-dark);
        box-shadow: 0 1px 4px rgba(0,0,0,0.4);
    }
    .post-content img:hover {
        box-shadow: 0 4px 15px rgba(0,0,0,0.6); 
    }
    
    /* NEW FIX: ä¼˜åŒ–æ°´å¹³åˆ†å‰²çº¿åœ¨æ·±è‰²æ¨¡å¼ä¸‹çš„æ˜¾ç¤º */
    .post-content hr {
        border-top: 1px solid var(--color-border-dark); 
        border-bottom: 1px solid var(--color-card-dark); 
    }
    
    /* NEW ADVANCED READABILITY 5: å¼ºè°ƒå†…å®¹ç¾åŒ– (Dark Mode) */
    .post-content strong {
        color: var(--color-link-dark); 
    }
    .post-content em {
        color: #ffb74d; /* æµ…æ©™è‰²ï¼Œé«˜å¯¹æ¯”åº¦ */
    }
    
    /* NEW: è¡¨æ ¼æ·±è‰²æ¨¡å¼é€‚é… */
    .post-content tr:nth-child(even) {
        background-color: var(--color-table-stripe-dark); 
    }
    .post-content th {
        background-color: var(--color-background-dark);
        color: var(--color-link-dark);
    }
    
    /* NEW: æ·±è‰²æ¨¡å¼ä¸‹é¡µè„šæ„å»ºä¿¡æ¯é¢œè‰² */
    .build-info span {
        color: #777; 
    }
    
    /* NEW UX SUGGESTION 3: ç¡®ä¿å›¾ç‰‡è¯´æ˜åœ¨æ·±è‰²æ¨¡å¼ä¸‹çš„é¢œè‰² */
    .post-content figcaption {
        color: #aaa;
    }
    
    /* NEW: æ·±è‰²æ¨¡å¼ä¸‹çš„æ ‡ç­¾å¾½ç« é¢œè‰²å’Œé˜´å½± */
    .tag-badge {
        background-color: var(--color-tag-bg-dark);
        color: var(--color-tag-text-dark);
        box-shadow: inset 0 1px 3px rgba(0,0,0,0.5); /* æŸ”å’Œå†…åµŒé˜´å½± */
    }
    .tag-badge:hover {
        background-color: var(--color-primary);
        color: white;
        transform: translateY(-1px); /* è½»å¾®ä¸Šæµ® */
        box-shadow: 0 2px 5px rgba(0, 121, 107, 0.5); /* å¤–é˜´å½± */
    }
    
    /* NEW: æ–‡ç« å¤´éƒ¨ä¿¡æ¯åŒºæ·±è‰²æ¨¡å¼ */
    .post-header-info {
        background-color: var(--color-header-info-bg-dark);
        box-shadow: var(--shadow-dark); 
    }

    /* NEW: åˆ—è¡¨å¡ç‰‡æ‚¬åœæ•ˆæœæ·±è‰²é€‚é… */
    .post-list-item:hover {
        box-shadow: var(--shadow-dark-hover);
        border-color: var(--color-link-dark); /* è¾¹æ¡†å˜ä¸ºæš—è‰²ä¸»é¢˜è‰² */
    }
}

/* NEW ADVANCED READABILITY 1: è‡ªå®šä¹‰æ»šåŠ¨æ¡æ ·å¼ */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}
::-webkit-scrollbar-thumb {
    background-color: var(--color-scrollbar-thumb); 
    border-radius: 4px;
}
::-webkit-scrollbar-track {
    background: transparent;
}

/* NEW ADVANCED READABILITY 2: æå‡ç„¦ç‚¹å¯è§æ€§ (Accessibility) */
a:focus, button:focus, input:focus, textarea:focus, .tag-badge:focus, .post-card-link-wrapper:focus, .button-primary:focus, .button-secondary:focus {
    outline: 2px solid var(--color-primary); 
    outline-offset: 2px;
    border-radius: 4px;
}

/* B. æ ¸å¿ƒæ’ç‰ˆä¼˜åŒ– (Readability Enhancement) */
body {
    font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Microsoft YaHei", "Noto Sans CJK SC", sans-serif;
    font-size: 18px; /* æå‡åŸºç¡€å­—ä½“å¤§å° */
    line-height: 1.8; /* æå‡è¡Œé«˜ï¼Œå¢åŠ é˜…è¯»èˆ’é€‚åº¦ */
    max-width: 960px; 
    margin: 0 auto;
    padding: 1rem; 
    word-wrap: break-word;
    scroll-behavior: smooth; 
    color: var(--color-text);
    background-color: var(--color-background); 
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility; 
}

/* NEW FIX: è§£å†³ Sticky Header è¦†ç›–å†…å®¹çš„é—®é¢˜ */
main {
    padding-top: 4rem; 
}
/* ---------------------------------------------------- */

a:link, a:visited { 
    color: var(--color-primary); 
    text-decoration: none;
    transition: color 0.2s;
}
a:hover {
    /* ä¿®æ­£å»ºè®® 3: æå‡éæ–‡ç« å†…å®¹é“¾æ¥çš„æ‚¬åœé¢œè‰² */
    color: #004d40;
    text-decoration: underline;
}

/* NEW READABILITY 1: æå‡æ–‡ç« å†…å®¹ä¸­é“¾æ¥çš„å¯è§æ€§ */
.post-content a:link, .post-content a:visited {
    color: var(--color-primary); /* ç¡®ä¿æ–‡ç« å†…é“¾æ¥é¢œè‰²ä¸€è‡´ */
    border-bottom: 1px dotted var(--color-primary); 
    transition: border-bottom 0.2s, color 0.2s;
}
.post-content a:hover {
    /* ä¿®æ­£å»ºè®® 3: ç¡®ä¿æ–‡ç« å†…å®¹é“¾æ¥æ‚¬åœé¢œè‰²æ›´é²œæ˜ */
    color: var(--color-primary); 
    border-bottom: 1px solid var(--color-primary); 
}
/* NEW: å¤–éƒ¨é“¾æ¥ç›®æ ‡æŒ‡ç¤ºå™¨ */
.post-content a[target="_blank"]::after {
    content: " â†—";
    font-size: 0.7em;
    color: var(--color-primary);
    vertical-align: super;
    font-weight: bold;
    margin-left: 2px;
}


/* ä»£ç å—é»˜è®¤æ ·å¼ï¼ˆæµ…è‰²ï¼‰*/
/* NEW UX SUGGESTION 3: ç§»é™¤è¾¹æ¡†ï¼Œå¢åŠ é˜´å½± */
pre, .codehilite { 
    background-color: var(--color-code-background); 
    color: var(--color-text); 
    border: none; /* ç§»é™¤è¾¹æ¡† */
    box-shadow: var(--shadow); /* æ–°å¢é˜´å½± */
    padding: 1rem; 
    border-radius: 8px; 
    overflow-x: auto; 
}
/* NEW ADVANCED READABILITY 4: ä¼˜åŒ–è¡Œå†…ä»£ç å¯è¯»æ€§ */
code {
    font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;
    font-size: 0.9em; 
    line-height: 1.2; 
    padding: 2px 6px;
    border-radius: 4px; 
    white-space: nowrap; 
    word-break: normal; 
    background-color: var(--color-inline-code-background); 
    color: var(--color-inline-code-text); 
}

/* å¼•ç”¨å—æ ·å¼ */
blockquote {
    padding: 15px 20px;
    border-left: 4px solid var(--color-primary);
    /* NEW FIX: ä½¿ç”¨ quote å˜é‡ä»£æ›¿ quote-light */
    background-color: var(--color-quote); /* ä¿®æ­£ä¸ºé€šç”¨å˜é‡ */
    margin: 1.5em 0;
    /* NEW UX SUGGESTION 2: è°ƒæ•´å­—ä½“æ ·å¼å’Œé¢œè‰² */
    font-style: normal;
    font-size: 1.05em;
    line-height: 1.6;
    color: var(--color-quote-text-light); 
    
    border-radius: 8px;
    transition: background-color 0.3s, border-color 0.3s, color 0.3s;
}

/* NEW ADVANCED READABILITY 5: å¼ºè°ƒå†…å®¹ç¾åŒ– (Light Mode) */
.post-content strong {
    color: var(--color-primary); 
    font-weight: 700;
}
.post-content em {
    color: #e65100; 
    font-style: italic;
}

/* NEW: å­¤è¡Œå’Œå¯¡è¡Œæ§åˆ¶ï¼Œæå‡æ®µè½é˜…è¯»æµ */
.post-content p {
    margin-top: 1.5em; /* å¢åŠ æ®µè½é—´è· */
    margin-bottom: 1.5em; /* å¢åŠ æ®µè½é—´è· */
    orphans: 3;
    widows: 3;
}
.post-content blockquote {
    orphans: 3;
    widows: 3;
}

/* NEW ADVANCED READABILITY 3: ä¼˜åŒ–åˆ—è¡¨å¯è¯»æ€§ */
.post-content ul, .post-content ol {
    orphans: 3;
    widows: 3;
    margin: 1.5em 0; 
    padding-left: 1.5em; 
}
/* NEW: åˆ—è¡¨æ ‡è®°ç€è‰² */
.post-content ul li::marker, .post-content ol li::marker {
    color: var(--color-primary); 
    font-weight: 600; 
}
.post-content li {
    margin-bottom: 0.5em; 
}

/* NEW UX SUGGESTION 1: å¢å¼ºæ–‡ç« å†…æ ‡é¢˜ï¼ˆH2ï¼‰çš„è§†è§‰åˆ†éš” */
.post-content h2 {
    font-size: 1.8em; 
    font-weight: 700;
    margin-top: 2.5em; /* å¢åŠ ä¸ä¸Šæ–‡çš„é—´è· */
    margin-bottom: 1em;
    padding-left: 15px; 
    border-left: 4px solid var(--color-primary); 
    line-height: 1.3;
}
/* ç¡®ä¿ H3/H4 æ ‡é¢˜æœ‰è¶³å¤Ÿçš„é¡¶éƒ¨é—´è· */
.post-content h3, .post-content h4 {
    margin-top: 2em;
    margin-bottom: 0.8em;
}


/* NEW: ç¡®ä¿å›¾ç‰‡æœ‰ç‹¬ç«‹é—´è·å’Œå—çº§æ˜¾ç¤º (å›¾ç‰‡å ä½ç¬¦/ç¾åŒ–) */
.post-content img {
    max-width: 100%;
    height: auto;
    margin: 1.5em auto; 
    display: block; 
    border-radius: 8px; 
    box-shadow: 0 1px 4px rgba(0,0,0,0.1); 
    vertical-align: middle; 
    min-height: 100px; /* Placeholder to prevent layout shift */
    background-color: var(--color-background-light); /* Light placeholder background */
    transition: transform 0.3s ease, box-shadow 0.3s ease, border 0.3s ease; /* æ–°å¢ border è¿‡æ¸¡ */
    border: 1px solid transparent; /* ç¡®ä¿æµ…è‰²æ¨¡å¼å›¾ç‰‡ä¹Ÿæœ‰è¾¹æ¡†ç”¨äºè¿‡æ¸¡ */
}
/* NEW UX SUGGESTION 2: å›¾ç‰‡æ‚¬åœæ•ˆæœ */
.post-content img:hover {
    transform: scale(1.01); 
    box-shadow: 0 4px 15px rgba(0,0,0,0.2); 
}

/* NEW UX SUGGESTION 3: å›¾ç‰‡è¯´æ˜ï¼ˆCaptionï¼‰æ ·å¼ */
.post-content figcaption {
    font-size: 0.9em;
    color: #777; /* Muted color */
    text-align: center;
    margin-top: -1em; /* Pull it closer to the image */
    margin-bottom: 2em; /* Push it away from the next paragraph */
    line-height: 1.4;
}

/* NEW READABILITY SUGGESTION 1: ä¼˜åŒ–æ°´å¹³åˆ†å‰²çº¿ */
.post-content hr {
    margin: 3em auto;
    border: 0;
    height: 1px;
    border-top: 1px solid var(--color-border); 
    border-bottom: 1px solid var(--color-card); 
    max-width: 50%; 
    opacity: 0.7;
}

/* NEW: è¡¨æ ¼æ ·å¼ä¼˜åŒ– */
.post-content table {
    width: 100%;
    border-collapse: collapse; 
    margin: 2em 0;
    overflow-x: auto; /* ç¡®ä¿ç§»åŠ¨ç«¯å¯æ»šåŠ¨ */
    display: block; /* å…è®¸ overflow-x: auto ç”Ÿæ•ˆ */
    background-color: var(--color-card); 
    border-radius: 8px;
    box-shadow: none; 
}
.post-content th, .post-content td {
    padding: 12px 15px;
    border: 1px solid var(--color-border);
    text-align: left;
    font-size: 0.95em;
}
.post-content th {
    background-color: var(--color-primary-light);
    color: #004d40;
    font-weight: 600;
    text-align: center;
}
.post-content tr:nth-child(even) {
    background-color: var(--color-table-stripe-light); 
}


/* <<< æ ¸å¿ƒä¼˜åŒ– 1: æ‰€æœ‰å¡ç‰‡é»˜è®¤æ ·å¼ - é›†ä¸­ç®¡ç† */
.toc-container, .tag-sidebar, table, blockquote, .callout, .hero-section, .post-nav, .cc-notice, footer, .post-header-info, nav, .post-list-item, .index-posts-list, .tag-page-header-card,
.post-main-content 
{ 
    background-color: var(--color-card); 
    border: 1px solid var(--color-border); 
    box-shadow: var(--shadow); 
    border-radius: 12px; 
    transition: box-shadow 0.3s, background-color 0.3s, border-color 0.3s;
}
/* ç§»é™¤ä¸éœ€è¦å¡ç‰‡æ ·å¼çš„å…ƒç´  */
footer, nav, .index-posts-list {
    background-color: transparent;
    border: none;
    box-shadow: none;
}

/* NEW UX SUGGESTION 1: æ–‡ç« å¤´éƒ¨ä¿¡æ¯åŒºï¼ˆæ ‡é¢˜å’Œå…ƒæ•°æ®ï¼‰ */
.post-header-info {
    padding: 2.5rem 2.5rem 1.5rem 2.5rem; /* åº•éƒ¨é—´è·ç•¥å° */
    margin: -2.5rem -2.5rem 2rem -2.5rem; /* è´Ÿå¤–è¾¹è·æ’‘æ»¡ post-main-content å®½åº¦ */
    background-color: var(--color-header-info-bg-light); /* ç•¥æœ‰ä¸åŒçš„èƒŒæ™¯è‰² */
    border: none;
    border-bottom: 1px solid var(--color-border); /* åº•éƒ¨è¾¹æ¡†ä¸æ­£æ–‡åˆ†éš” */
    border-radius: 12px 12px 0 0; /* é¡¶éƒ¨ä¿æŒåœ†è§’ï¼Œåº•éƒ¨å°–è§’ */
    box-shadow: none;
}
/* é’ˆå¯¹éæ–‡ç« é¡µçš„ post-main-content ç§»é™¤é¡¶éƒ¨è¾¹è· */
.page-index .post-main-content, 
.page-archive .post-main-content,
.page-tags .post-main-content,
.page-about .post-main-content {
    /* ç§»é™¤è´Ÿå¤–è¾¹è·ï¼Œä»¥ä¿æŒæ­£å¸¸å¡ç‰‡æ ·å¼ */
    padding: 2.5rem;
    margin-bottom: 2rem;
}
.page-index .post-header-info, 
.page-archive .post-header-info,
.page-tags .post-header-info,
.page-about .post-header-info {
    padding: 0;
    margin: 0;
    background-color: transparent;
    border-bottom: none;
    border-radius: 0;
}


/* NEW: ä¸“é—¨ä¸ºæ–‡ç« ä¸»å†…å®¹å¡ç‰‡æ·»åŠ å†…è¾¹è· */
.post-main-content {
    padding: 2.5rem; 
    margin-bottom: 2rem; 
    position: static !important; 
}

/* MODIFIED: æ–‡ç« ä¸»æ ‡é¢˜ (H1) - ç‹¬ç«‹å¤´éƒ¨æ ·å¼ */
.post-header-info h1:first-child { 
    font-size: 2.5em; 
    font-weight: 800; 
    color: var(--color-text); 
    text-align: left; 
    margin-top: 0; 
    margin-bottom: 0.5rem; 
    padding-bottom: 0;
    border-bottom: none;
    position: static !important; 
}

/* MODIFIED: ä¼˜åŒ–æ–‡ç« å…ƒæ•°æ®æ ·å¼ï¼ˆæ ‡é¢˜ã€æ—¥æœŸã€æ ‡ç­¾ï¼‰ */
.post-meta {
    text-align: left;
    font-size: 0.95em; 
    color: #6a6a6a; 
    margin-top: 0; 
    margin-bottom: 0; 
    padding-bottom: 0; 
    border-bottom: none; 
    position: static !important; 
}
.post-meta > span, .post-meta > div {
    display: inline-block; 
    margin-right: 8px; 
    color: #6a6a6a; 
}
.post-meta > span:not(:last-child)::after, 
.post-meta > div:not(:last-child)::after { 
    content: "â€¢"; 
    color: #aaa; 
    margin-left: 8px; 
    font-weight: bold; 
}
.post-meta .tags-list {
    display: inline-block;
    padding: 0;
    list-style: none;
    margin: 0;
}
.post-meta .tags-list li {
    display: inline;
    margin-bottom: 0;
}
.post-meta .tags-list .tag-badge {
    margin-right: 5px;
    margin-top: 0;
    margin-bottom: 0;
}

/* NEW UX SUGGESTION 3: æ ‡ç­¾å¾½ç« æ ·å¼ */
.tag-badge {
    display: inline-block;
    padding: 4px 10px;
    background-color: var(--color-tag-bg-light);
    color: var(--color-tag-text-light);
    border-radius: 4px;
    font-size: 0.8em;
    font-weight: 500;
    text-decoration: none !important;
    border-bottom: none !important; /* ç§»é™¤è™šçº¿ä¸‹åˆ’çº¿ */
    white-space: nowrap;
    transition: background-color 0.2s, box-shadow 0.2s, transform 0.2s;
    /* å¢åŠ å†…åµŒé˜´å½±æ¨¡æ‹ŸæŒ‰é’®æ•ˆæœ */
    box-shadow: inset 0 1px 3px rgba(0,0,0,0.1); 
}
.tag-badge:hover {
    background-color: var(--color-primary);
    color: white;
    transform: translateY(-1px); /* è½»å¾®ä¸Šæµ® */
    box-shadow: 0 2px 5px rgba(0, 121, 107, 0.3); /* å¤–é˜´å½± */
}


/* NEW COMPONENT STYLES: Header/Navigation Optimization */
header {
    background-color: rgba(255, 255, 255, 0.95); 
    padding: 0 1rem; 
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1); 
    position: sticky; 
    top: 0;
    z-index: 1000; 
    transition: background-color 0.3s, box-shadow 0.3s, border-color 0.3s;
    border-top-left-radius: 12px; 
    border-top-right-radius: 12px; 
    border-bottom-left-radius: 12px; 
    border-bottom-right-radius: 12px; 
    backdrop-filter: blur(5px);
    -webkit-backdrop-filter: blur(5px); 
}

.header-inner {
    max-width: 960px; 
    margin: 0 auto;
    display: flex; 
    justify-content: space-between; 
    align-items: center; 
    padding: 1rem 0; 
}

/* NEW: ç½‘ç«™æ ‡é¢˜äº¤äº’ä¼˜åŒ– */
.site-title {
    font-size: 1.5em; 
    font-weight: 800; 
    color: var(--color-primary); 
    text-decoration: none;
    line-height: 1; 
    transition: color 0.2s, transform 0.2s;
}
.site-title:hover {
    color: #004d40; 
    transform: scale(1.03); 
}


nav a {
    margin-left: 1rem; 
    padding: 8px 12px;
    border-radius: 8px; 
    font-size: 1em;
    font-weight: 500;
    color: var(--color-text); 
    text-decoration: none;
    transition: background-color 0.2s, color 0.2s, box-shadow 0.2s;
}

/* MODIFIED: ç»Ÿä¸€æ‚¬åœå’Œæ¿€æ´»çŠ¶æ€çš„æ ·å¼ */
nav a:hover {
    background-color: var(--color-primary-light);
    color: var(--color-primary);
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}
nav a.active-nav-link {
    background-color: var(--color-primary);
    color: white;
    text-decoration: none;
    font-weight: 600; 
    box-shadow: 0 2px 5px rgba(0, 121, 107, 0.3); 
}


/* --- NEW COMPONENT STYLES (Indices & Hero) --- */

/* NEW COMPONENT STYLES: Hero Section */
.hero-section {
    padding: 3rem 1rem;
    margin-top: 1.5rem;
    margin-bottom: 3rem;
    background-color: var(--color-primary-light);
    border-radius: 12px;
    text-align: center;
    border: 1px solid var(--color-primary-light);
}
.hero-section h1 {
    font-size: 2.2em;
    color: var(--color-primary);
    margin-bottom: 0.5rem;
}
.hero-section p {
    font-size: 1.1em;
    color: #444;
}

/* 1. é¦–é¡µæ–‡ç« åˆ—è¡¨å¡ç‰‡å¢å¼º */
.index-posts-list {
    list-style: none; 
    padding: 0;
    margin-top: 2em;
    background-color: transparent; 
    border: none;
    box-shadow: none;
}
.post-list-item {
    padding: 1.5rem;
    margin-bottom: 2rem; 
    border: 1px solid var(--color-border); 
    background-color: var(--color-card); 
    border-radius: 12px;
    transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s; /* æ–°å¢ border-color è¿‡æ¸¡ */
}
/* NEW UX SUGGESTION 1: åˆ—è¡¨å¡ç‰‡æ‚¬åœåé¦ˆ */
.post-list-item:hover {
    transform: translateY(-3px); 
    box-shadow: var(--shadow-hover);
    border-color: var(--color-primary); /* è¾¹æ¡†å˜ä¸ºä¸»é¢˜è‰² */
}
.post-list-item h2 { /* Article Title */
    margin-top: 0.5em;
    margin-bottom: 0.5em;
    font-size: 1.4em;
    font-weight: 700; /* ç•¥å¾®åŠ ç²—æ ‡é¢˜ */
    border-bottom: none;
    padding-bottom: 0;
}
.post-list-item p { /* Summary/Abstract */
    color: #666; 
    font-size: 0.95em;
    line-height: 1.5;
    margin-top: 0.5em;
    margin-bottom: 1em; 
}
.post-list-item .post-meta { /* Meta data in index list */
    font-size: 0.85em;
    margin-bottom: 0;
    padding-bottom: 0;
    border-bottom: none;
    color: #999;
}


/* 2. é¢åŒ…å±‘å¯¼èˆªæ ·å¼ (Breadcrumbs) */
.breadcrumbs {
    margin: 1.5em 0;
    font-size: 0.9em;
    color: #777;
    overflow-x: hidden; 
}
.breadcrumbs ol {
    display: flex;
    list-style: none;
    padding: 0;
    margin: 0;
    
    white-space: nowrap; 
    overflow-x: auto; 
    -webkit-overflow-scrolling: touch; 
    padding-bottom: 5px; 
}
.breadcrumbs li {
    margin-right: 0.5em;
    flex-shrink: 0; 
}
.breadcrumbs li:not(:last-child)::after {
    content: " / ";
    margin-left: 0.5em;
    color: #bbb;
}
.breadcrumbs a {
    color: #777;
    text-decoration: none;
}
.breadcrumbs a:hover {
    color: var(--color-primary);
    text-decoration: underline;
}
.breadcrumbs li[aria-current="page"] {
    font-weight: bold;
    color: var(--color-primary);
}


/* NEW FIX: Anchor Link Scroll Offset - é¿å…ç²˜æ€§å¯¼èˆªæ é®æŒ¡è·³è½¬åˆ°çš„æ ‡é¢˜ */
.post-content h1, 
.post-content h2, 
.post-content h3, 
.post-content h4, 
.post-content h5, 
.post-content h6 {
    scroll-margin-top: 5rem; 
}


/* NEW: ç²˜æ€§ç›®å½• (TOC) æ ·å¼ (å¤§å±å¹•) */
@media (min-width: 1000px) {
    /* NEW FIX: å®ç°åŒåˆ—å¸ƒå±€ */
    .content-layout-wrapper {
        display: flex;
        gap: 30px; 
        justify-content: space-between;
    }
    .post-main-content {
        flex-grow: 1; 
        max-width: 70%; 
        min-width: 50%;
        margin-bottom: 0; 
    }
    .toc-container {
        padding: 1.5rem;
        position: sticky; 
        top: calc(75px + 1rem); 
        max-height: calc(100vh - 100px); 
        overflow-y: auto; 
        font-size: 0.9em;
        flex-shrink: 0; 
        width: 250px;
        margin-bottom: 0; 
    }
}
.toc-container { /* Base style, including mobile */
    padding: 1.5rem;
    margin-bottom: 2rem;
}
.toc-container ul {
    list-style: none;
    padding-left: 0;
    margin: 0;
}
.toc-container li a {
    display: block;
    padding: 8px 10px; /* å¢åŠ ç‚¹å‡»åŒºåŸŸ */
    margin: 2px 0; /* å¢åŠ è¡Œé—´è· */
    border-radius: 4px; /* å¢åŠ åœ†è§’ */
    color: var(--color-text);
    text-decoration: none;
    border-bottom: none;
    transition: color 0.2s, border-left 0.2s, background-color 0.2s;
}
/* NEW UX SUGGESTION 2: ç›®å½•é¡¹æ‚¬åœæ•ˆæœ */
.toc-container li a:hover {
    color: var(--color-primary);
    background-color: var(--color-primary-light); /* æ‚¬åœèƒŒæ™¯è‰² */
}
.toc-container .toc-level-2 { padding-left: 0.5em; }
.toc-container .toc-level-3 { padding-left: 1em; }
.toc-container .toc-level-4 { padding-left: 1.5em; }
/* NEW UX SUGGESTION 2: ç›®å½•æ¿€æ´»çŠ¶æ€æ•ˆæœå¢å¼º */
.toc-container .toc-active { 
    color: var(--color-primary) !important; 
    font-weight: 700; /* æ ‡é¢˜åŠ ç²— */
    border-left: 3px solid var(--color-primary); 
    padding-left: 10px;
    margin-left: -13px;
    background-color: var(--color-toc-active-bg-light); /* æ¿€æ´»èƒŒæ™¯è‰² */
}
/* ç¡®ä¿æ¿€æ´»çŠ¶æ€ä¸‹çš„æ‚¬åœèƒŒæ™¯ä¸è¦†ç›–æ¿€æ´»èƒŒæ™¯ */
.toc-container .toc-active:hover {
    background-color: var(--color-toc-active-bg-light); 
}


/* NEW: Mobile Optimization (å“åº”å¼ä¼˜åŒ–) */
@media (max-width: 768px) {
    body {
        font-size: 16px; 
        padding: 0.5rem;
    }
    
    /* NEW UX SUGGESTION 4: å¯¼èˆªæ å±…ä¸­å’Œå †å  */
    .header-inner {
        flex-direction: column; 
        align-items: center; 
        padding: 0.5rem 0;
    }
    .site-title {
        font-size: 1.3em; 
        white-space: nowrap; 
        margin-bottom: 0.5rem; 
    }
    nav {
        display: flex; 
        justify-content: center;
        width: 100%;
        overflow-x: auto; 
        padding-bottom: 5px; 
    }
    /* MODIFIED: ç¡®ä¿å¯¼èˆªé“¾æ¥åœ¨çª„å±ä¸‹ä¿æŒç´§å‡‘ */
    nav a {
        margin: 0 0.5rem; 
        padding: 4px 8px; 
        font-size: 0.9em; 
        flex-shrink: 0; 
    }
    
    /* Unified Mobile Padding for Post Card */
    .post-main-content {
        padding: 1.5rem 1rem; 
    }
    /* ç§»åŠ¨ç«¯æ–‡ç« å¤´éƒ¨ä¿¡æ¯åŒºè°ƒæ•´ */
    .post-header-info {
        padding: 1.5rem 1rem 1rem 1rem;
        margin: -1.5rem -1rem 1.5rem -1rem; 
        border-radius: 12px 12px 0 0;
    }
    
    /* Mobile H1 font size micro-adjustment */
    .post-header-info h1:first-child { 
        font-size: 2em; 
        margin-bottom: 0.3rem; 
    }
}


/* Footer Convergence (é¡µè„šæ”¶æ•›) */
footer {
    font-size: 0.85em; 
    color: #999; 
    text-align: center; 
    padding: 2rem 1rem; 
    background-color: transparent; 
    border: none;
    box-shadow: none;
}
footer a {
    color: #999;
}
footer a:hover {
    color: var(--color-primary);
}

/* NEW: Footer structure optimization */
.footer-content {
    display: block;
    max-width: 960px; 
    margin: 0 auto;
}
.footer-content p {
    margin: 0.5em 0; 
    line-height: 1.2;
}
.build-info span {
    color: #b0b0b0; 
    font-size: 0.9em;
}

/* ------------------------------------------------------------------ */
/* ----------- NEW UX SUGGESTION 2.2: Callout/æç¤ºæ¡†æ ·å¼ ------------ */
/* ------------------------------------------------------------------ */

.post-content .callout {
    padding: 1rem 1.5rem;
    margin: 2em 0;
    border-radius: 8px;
    font-size: 1em;
    line-height: 1.6;
    border: 1px solid var(--color-callout-border-light);
    box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    position: relative;
    color: var(--color-text); /* ç¡®ä¿æ–‡æœ¬é¢œè‰²æ­£ç¡® */
}
/* è§£å†³ Callout å†…éƒ¨æ®µè½çš„ margin é—®é¢˜ */
.post-content .callout p {
    margin-top: 1em;
    margin-bottom: 1em;
}
.post-content .callout p:first-child {
    margin-top: 0;
}
.post-content .callout p:last-child {
    margin-bottom: 0;
}
.post-content .callout strong {
    font-weight: 700;
}
/* æç¤º Tip Callout (ç»¿è‰²) */
.post-content .callout.callout-tip {
    background-color: var(--color-tip-bg-light);
    border-left: 5px solid var(--color-tip-text-light);
}
/* è­¦å‘Š Warning Callout (é»„è‰²/æ©™è‰²) */
.post-content .callout.callout-warning {
    background-color: var(--color-warning-bg-light);
    border-left: 5px solid var(--color-warning-text-light);
}
/* å±é™© Danger Callout (çº¢è‰²) */
.post-content .callout.callout-danger {
    background-color: var(--color-danger-bg-light);
    border-left: 5px solid var(--color-danger-text-light);
}
/* ç®€æ˜“å›¾æ ‡ï¼ˆä½¿ç”¨ Unicode/Emoji æˆ–å‡è®¾ Font Awesomeï¼‰*/
.post-content .callout::before {
    font-family: sans-serif; 
    font-size: 1.1em;
    line-height: 1;
    margin-right: 10px;
    vertical-align: middle;
    display: inline-block;
    font-weight: 900;
}
.post-content .callout.callout-tip::before { content: "ğŸ’¡"; color: var(--color-tip-text-light); }
.post-content .callout.callout-warning::before { content: "âš ï¸"; color: var(--color-warning-text-light); }
.post-content .callout.callout-danger::before { content: "âŒ"; color: var(--color-danger-text-light); }


/* ------------------------------------------------------------------ */
/* ----------- NEW UX SUGGESTION 2.3: æŒ‰é’®è§†è§‰å±‚æ¬¡ ------------------ */
/* ------------------------------------------------------------------ */

.button-primary, .button-secondary {
    display: inline-block;
    padding: 10px 20px;
    margin: 0.5em 0.5em 0.5em 0;
    border: 2px solid transparent;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    text-align: center;
    transition: all 0.2s ease;
    text-decoration: none !important;
    white-space: nowrap;
    line-height: 1.2;
}

/* Primary Button Style (ä¸»æ“ä½œæŒ‰é’®) */
.button-primary {
    background-color: var(--color-primary);
    color: white;
    border-color: var(--color-primary);
    box-shadow: 0 2px 5px rgba(0, 121, 107, 0.3);
}
.button-primary:hover {
    background-color: #004d40;
    color: white;
    border-color: #004d40;
    box-shadow: 0 4px 10px rgba(0, 121, 107, 0.5);
    transform: translateY(-1px);
}

/* Secondary Button Style (æ¬¡è¦æ“ä½œæŒ‰é’®) */
.button-secondary {
    background-color: transparent;
    color: var(--color-primary);
    border-color: var(--color-primary);
}
.button-secondary:hover {
    background-color: var(--color-primary-light);
    color: var(--color-primary);
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}

/* Dark Mode Button Adaptation */
@media (prefers-color-scheme: dark) {
    .button-secondary {
        color: var(--color-link-dark);
        border-color: var(--color-link-dark);
    }
    .button-secondary:hover {
        background-color: rgba(128, 203, 196, 0.1);
        color: var(--color-link-dark);
        border-color: var(--color-link-dark);
    }
    /* Primary button remains consistent with theme color */
    .button-primary:hover {
        background-color: var(--color-primary); /* Stay primary, less dark */
        box-shadow: 0 4px 10px rgba(0, 121, 107, 0.5);
    }
}
