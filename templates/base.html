<!-- --- START OF FILE scaling-parakeet-main/templates/base.html --- -->

<!DOCTYPE html>
<html lang="{{lang}}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{page_title}} - {{blog_title}}</title>
    <meta name="description" content="{{blog_description}}">
    <meta name="author" content="{{blog_author}}">
    <link rel="canonical" href="{{canonical_url}}">
    <link rel="stylesheet" href="{{site_root}}/assets/{{css_filename}}"> 
    <link rel="alternate" type="application/rss+xml" title="{{blog_title}} RSS Feed" href="{{site_root}}/rss.xml">

    {%- if json_ld_schema -%}
    <script type="application/ld+json">
    {{ json_ld_schema | safe }}
    </script>
    {%- endif -%}

</head>
<body class="page-{{page_id}}">
    <!-- ä¼˜åŒ–: 1.1 A11Y: Skip Link è·³åˆ°ä¸»å†…å®¹ -->
    <a href="#main-content" class="skip-link">è·³åˆ°ä¸»å†…å®¹</a> 

    <header>
        <div class="header-inner">
            <a href="{{site_root}}/" class="site-title">{{blog_title}}</a>
            <nav>
                <a href="{{site_root}}/" {% if page_id == 'index' %}class="active-nav-link"{% endif %}>é¦–é¡µ</a>
                <a href="{{site_root}}/archive.html" {% if page_id == 'archive' %}class="active-nav-link"{% endif %}>å½’æ¡£</a>
                <a href="{{site_root}}/tags.html" {% if page_id == 'tags' %}class="active-nav-link"{% endif %}>æ ‡ç­¾</a>
                <a href="{{site_root}}/about.html" {% if page_id == 'about' %}class="active-nav-link"{% endif %}>å…³äº</a>
            </nav>
        </div>
    </header>
    
    <main id="main-content">
        <div class="main-layout">
            <div class="content-area">
                <div class="page-header">
                    {%- if page_id == 'post' -%}
                        <h1>{{post.title}}</h1>
                        <div class="post-meta">
                            <div class="meta-container">
                                <!-- ä¿®å¤ï¼šä¸å†ä½¿ç”¨ç¡¬ç¼–ç çš„ / åˆ†éš”ç¬¦ï¼Œæ”¹ç”¨ flex gap -->
                                <span class="meta-date">
                                    {{post_date}}
                                </span>
                                
                                {% if post_tags %}
                                    <div class="meta-tags">
                                        <ul class="tags-list">
                                        {% for tag in post_tags %}
                                            <!-- è¯¦æƒ…é¡µæ ‡ç­¾ï¼š#Tag é£æ ¼ï¼Œæ— èƒŒæ™¯ -->
                                            <li><a href="{{site_root}}/tags/{{tag.slug}}.html" class="tag-badge">#{{tag.name}}</a></li>
                                        {% endfor %}
                                        </ul>
                                    </div>
                                {% endif %}
                            </div>
                        </div>

                        {# ç§»åŠ¨ç«¯ç›®å½• #}
                        {% if toc_html %}
                        <details class="mobile-toc">
                            <summary>ğŸ“‘ ç›®å½•</summary>
                            <div class="mobile-toc-content">
                                {{ toc_html | safe }}
                            </div>
                        </details>
                        {% endif %}

                    {%- endif -%}
                </div>
                
                {# --- åˆ—è¡¨é¡µé¢ (é¦–é¡µ, æ ‡ç­¾è¯¦æƒ…, å½’æ¡£) --- #}
                {%- if page_id == 'index' or page_id == 'tag' or page_id == 'archive' -%} 
                    
                    {%- if page_id == 'tag' -%}
                        <!-- ä¼˜åŒ–: 3.3 æ ‡ç­¾é¡µå¯¼èˆªå¢å¼º -->
                        <div class="tag-meta-info">
                            <h1 class="page-list-title"># {{tag}}</h1>
                            <p style="color: var(--color-main-subtext); margin-bottom: 20px; font-size: 0.9rem;">å…± {{posts | length}} ç¯‡æ–‡ç« </p>
                            <a href="{{site_root}}/tags.html" class="button button-secondary button-small">â† æ‰€æœ‰æ ‡ç­¾</a>
                        </div>
                        <hr style="border: none; border-top: 1px solid var(--color-main-border); margin: 30px 0;">
                    {%- elif page_id == 'archive' -%}
                        <!-- å½’æ¡£é¡µç”± generator ç›´æ¥ç”Ÿæˆ HTML -->
                    {%- endif -%}
                    
                    {%- if page_id != 'archive' -%}
                    <div class="post-list">
                    {% for post in posts %}
                        <a href="{{site_root}}/{{post.link}}" class="post-list-item">
                            
                            <!-- 1. æ—¥æœŸå‰ç½® -->
                            <span class="meta-date">{{post.date_formatted}}</span>

                            <!-- 2. æ ‡é¢˜ -->
                            <h2 class="post-title">{{post.title}}</h2>
                            
                            <!-- 3. æ‘˜è¦ -->
                            {% if post.excerpt %}
                                <p class="post-excerpt">{{post.excerpt}}</p>
                            {% endif %}
                            
                            <!-- 4. åº•éƒ¨æ ‡ç­¾ (Hashtag é£æ ¼) -->
                            {% if post.tags %}
                            <div class="post-meta-list">
                                <ul class="tags-list">
                                {% for tag in post.tags %}
                                    <li><span class="tag-badge">#{{tag.name}}</span></li>
                                {% endfor %}
                                </ul>
                            </div>
                            {% endif %}
                        </a>
                    {% endfor %}
                    </div>
                    {%- endif -%}

                    {%- if page_id == 'index' and posts|length == max_posts_on_index -%}
                    <div class="read-more-link-area">
                        <a href="{{site_root}}/archive.html" class="button button-secondary">æŸ¥çœ‹å…¨éƒ¨å½’æ¡£ â†’</a>
                    </div>
                    {%- endif -%}

                {%- endif -%}

                {# --- æ­£æ–‡/å½’æ¡£/æ ‡ç­¾äº‘å†…å®¹æ¸²æŸ“åŒº --- #}
                {%- if content_html -%}
                    <div class="post-content">
                        {{content_html | safe}}
                    </div>
                {%- endif -%}
                
                {# ------------------------------------------------------------------------ #}
                {# [æ–°å¢] æ–‡ç« ä¸Šä¸‹å¯¼èˆª #}
                {%- if page_id == 'post' and (prev_post_nav or next_post_nav) -%}
                <nav class="post-navigation">
                    {# Newer Article (æ—¶é—´ä¸Šæ›´è¿‘, åˆ—è¡¨ä¸­çš„å‰ä¸€ä¸ª) #}
                    {% if prev_post_nav %}
                    <a href="{{site_root}}/{{prev_post_nav.link}}" class="nav-link nav-prev">
                        <small>â† Newer Article</small>
                        <h3>{{prev_post_nav.title}}</h3>
                    </a>
                    {% else %}
                    <div class="nav-link-placeholder"></div>
                    {% endif %}

                    {# Older Article (æ—¶é—´ä¸Šæ›´è¿œ, åˆ—è¡¨ä¸­çš„åä¸€ä¸ª) #}
                    {% if next_post_nav %}
                    <a href="{{site_root}}/{{next_post_nav.link}}" class="nav-link nav-next">
                        <small>Older Article â†’</small>
                        <h3>{{next_post_nav.title}}</h3>
                    </a>
                    {% else %}
                    <div class="nav-link-placeholder"></div>
                    {% endif %}
                </nav>
                {%- endif -%}
                {# ------------------------------------------------------------------------ #}
                
            </div>
            
            {%- if page_id == 'post' and toc_html -%}
                <div class="toc-area">
                    <h3>ç›®å½•</h3>
                    {{toc_html | safe}}
                </div>
            {%- endif -%}
        </div>
    </main>
    
    <footer>
        <div class="footer-content">
            <p class="copyright-info">&copy; {{current_year}} {{blog_author}}.</p>
            <p class="footer-links">
                <a href="{{site_root}}/rss.xml">RSS</a>
                <a href="{{site_root}}/archive.html">Archive</a>
                <a href="#main-content" class="back-to-top">Top</a>
            </p>
        </div>
    </footer>
</body>
</html>
