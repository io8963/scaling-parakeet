<!DOCTYPE html>
<html lang="zh-cn"> <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{page_title}} - {{blog_title}}</title>
    <meta name="description" content="{{blog_description}}">
    <meta name="author" content="{{blog_author}}">
    <link rel="canonical" href="{{canonical_url}}">
    <link rel="stylesheet" href="{{site_root}}/assets/{{css_filename}}"> 
    <link rel="alternate" type="application/rss+xml" title="{{blog_title}} RSS Feed" href="{{site_root}}/rss.xml">

    {%- if json_ld_schema -%}
    <script type="application/ld+json">
    {{ json_ld_schema | safe }}
    </script>
    {%- endif -%}

</head>
<body class="page-{{page_id}}">
    <a href="#main-content" class="skip-link">跳到主内容</a> 

    <header>
        <div class="header-inner">
            <a href="{{site_root}}/" class="site-title">{{blog_title}}</a>
            <nav>
                <a href="{{site_root}}/" {% if page_id == 'index' %}class="active-nav-link"{% endif %}>首页</a>
                <a href="{{site_root}}/archive/" {% if page_id == 'archive' %}class="active-nav-link"{% endif %}>归档</a>
                <a href="{{site_root}}/tags/" {% if page_id == 'tags-list' %}class="active-nav-link"{% endif %}>标签</a>
                <a href="{{site_root}}/about/" {% if page_id == 'about' %}class="active-nav-link"{% endif %}>关于</a>
            </nav>
        </div>
    </header>
    
    <main id="main-content">
        <div class="main-layout">
            <div class="content-area">

                {%- if page_id == 'index' -%}
                
                <ul class="new-post-list">
                {% for post in posts %}
                    <li class="new-post-list-item">
                        <a href="{{ post.link }}" class="post-link">
                            
                            <h2 class="post-title">{{ post.title }}</h2>

                            <div class="post-meta">
                                <span class="post-date">{{ post.date_formatted }}</span>
                                
                                {% for tag in post.tags %}
                                    <a href="{{ tag.link }}" class="tag-badge">{{ tag.name }}</a>
                                {% endfor %}
                            </div>

                            <p class="post-summary">{{ post.summary }}</p>
                        </a>
                    </li>
                {% endfor %}
                </ul>

                {%- elif page_id == 'archive' -%}
                
                <div class="page-header">
                    <h1>{{page_title}}</h1>
                    <p class="archive-intro">共收录了 {{posts | length}} 篇文章。</p>
                </div>
                {{content_html | safe}}
                
                {%- elif page_id == 'tags-list' -%}
                
                <div class="page-header">
                    <h1>{{page_title}}</h1>
                </div>
                {{content_html | safe}}

                {%- elif page_id == 'tag' -%}
                
                <div class="page-header">
                    <h1>标签：{{tag}}</h1>
                    <p class="archive-intro">共收录了 {{posts | length}} 篇文章。</p>
                </div>
                {{content_html | safe}}

                {%- elif page_id == 'about' -%}

                <div class="post-content">
                    {{content_html | safe}}
                </div>
                
                {%- elif page_id == 'post' -%}

                <div class="page-header">
                    <h1 class="post-title">{{post.title}}</h1>
                    <div class="post-meta">
                        <span class="post-date">{{post.date_formatted}}</span>
                        <span class="post-author">By {{blog_author}}</span>
                        {% for tag in post.tags %}
                            <a href="{{tag.link}}" class="post-tag-badge">{{tag.name}}</a>
                        {% endfor %}
                    </div>
                </div>
                <div class="post-content">
                    {{content_html | safe}}
                </div>
                
                {%- endif -%}

                {%- if page_id == 'post' -%}
                <div class="post-license">
                    <p>
                        <span class="license-icon">
                            <i title="Creative Commons">CC</i>
                            <i title="Attribution">BY</i>
                            <i title="Non-Commercial">NC</i>
                        </span>
                        本文依据 <a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="license noopener noreferrer">CC BY-NC 4.0 许可协议</a> 发布。
                    </p>
                    <p>转载请遵循协议，务必保留作者署名及原文链接。推荐使用以下标准格式：</p>
                    <div class="license-format-code">
                        <code>
                            本文标题：{{post.title}} <br>
                            作者：{{blog_author}} <br>
                            原文链接：<a href="{{canonical_url}}">{{canonical_url}}</a>
                        </code>
                    </div>
                </div>
                {%- endif -%}

                {# 文章上/下导航 #}
                {%- if page_id == 'post' and (prev_post_nav or next_post_nav) -%}
                <nav class="post-navigation">
                    {% if prev_post_nav %}
                    <a href="{{prev_post_nav.link}}" class="nav-link nav-prev">
                        <small>← 上一篇 (较新)</small>
                        <h3>{{prev_post_nav.title}}</h3>
                    </a>
                    {% else %}
                    <div class="nav-link-placeholder"></div>
                    {% endif %}

                    {% if next_post_nav %}
                    <a href="{{next_post_nav.link}}" class="nav-link nav-next">
                        <small>下一篇 (较旧) →</small>
                        <h3>{{next_post_nav.title}}</h3>
                    </a>
                    {% else %}
                    <div class="nav-link-placeholder"></div>
                    {% endif %}
                </nav>
                {%- endif -%}
                
            </div>
            
            {%- if page_id == 'post' and toc_html -%}
                <div class="toc-area">
                    <h3>目录</h3>
                    {{toc_html | safe}}
                </div>
            {%- endif -%}
        </div>
    </main>
    
    <footer>
        <div class="footer-content">
            <p class="copyright-info">&copy; {{current_year}} {{blog_author}}.</p>
            <p class="build-info">{{footer_time_info}}</p>
            <p class="footer-links">
                <a href="{{site_root}}/rss.xml">RSS</a>
                <a href="#main-content" class="back-to-top">Top</a>
            </p>
        </div>
    </footer>
</body>
</html>
