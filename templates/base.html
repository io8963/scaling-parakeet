<!DOCTYPE html>
<html lang="{{lang}}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{page_title}} - {{blog_title}}</title>
    <meta name="description" content="{{blog_description}}">
    <meta name="author" content="{{blog_author}}">
    <link rel="canonical" href="{{canonical_url}}">
    <link rel="stylesheet" href="{{site_root}}/assets/{{css_filename}}"> 
    <link rel="alternate" type="application/rss+xml" title="{{blog_title}} RSS Feed" href="{{site_root}}/rss.xml">

    {%- if json_ld_schema -%}
    <script type="application/ld+json">
    {{ json_ld_schema | safe }}
    </script>
    {%- endif -%}

</head>
<body class="page-{{page_id}}">
    <header>
        <div class="header-inner">
            <a href="{{site_root}}/" class="site-title">{{blog_title}}</a>
            <nav>
                <a href="{{site_root}}/" {% if page_id == 'index' %}class="active-nav-link"{% endif %}>首页</a>
                <a href="{{site_root}}/archive.html" {% if page_id == 'archive' %}class="active-nav-link"{% endif %}>归档</a>
                <a href="{{site_root}}/tags.html" {% if page_id == 'tags' %}class="active-nav-link"{% endif %}>标签</a>
                <a href="{{site_root}}/about.html" {% if page_id == 'about' %}class="active-nav-link"{% endif %}>关于</a>
            </nav>
        </div>
    </header>
    
    <main id="main-content">
        <div class="main-layout">
            <div class="content-area">
                
                <div class="page-header">
                    {%- if page_id == 'post' -%}
                        <h1>{{post.title}}</h1>
                        <div class="post-meta">
                            <span class="meta-date">发布于 {{post.date_formatted}}</span> 
                            {% if post.tags %}
                                <div class="meta-tags">
                                    <span class="meta-tags-label">标签:</span> 
                                    <ul class="tags-list">
                                    {% for tag in post.tags %}
                                        <li><a href="{{site_root}}/tags/{{tag.slug}}.html" class="tag-badge">{{tag.name}}</a></li>
                                    {% endfor %}
                                    </ul>
                                </div>
                            {% endif %}
                        </div>
                    {%- endif -%}
                </div>
                
                {%- if page_id == 'index' or page_id == 'tag' -%}
                    
                    {%- if page_id == 'tag' -%}
                        <h1 class="page-list-title">标签: {{tag}} (共 {{posts | length}} 篇)</h1>
                    {%- endif -%}
                    
                    <ul class="post-list">
                    {% for post in posts %}
                        <a href="{{site_root}}{{post.link}}" class="post-list-item">
                            <h2 class="post-title">{{post.title}}</h2>
                            
                            {% if post.excerpt %}
                            <p class="post-excerpt">{{post.excerpt}}</p>
                            {% endif %}
                            
                            <div class="post-meta-list">
                                <span class="meta-date">{{post.date_formatted}}</span>
                                
                                {% if post.tags %}
                                    <div class="meta-tags">
                                        <ul class="tags-list">
                                        {% for tag in post.tags %}
                                            <li><a href="{{site_root}}/tags/{{tag.slug}}.html" class="tag-badge">{{tag.name}}</a></li>
                                        {% endfor %}
                                        </ul>
                                    </div>
                                {% endif %}
                            </div>
                        </a>
                    {% endfor %}
                    </ul>
                    
                    {%- if page_id == 'index' and posts|length == max_posts_on_index -%}
                    <div class="read-more-link-area">
                        <a href="{{site_root}}/archive.html" class="button button-secondary">查看全部归档 &raquo;</a>
                    </div>
                    {%- endif -%}

                {%- else -%}
                    {{content_html | safe}}
                {%- endif -%}
                
            </div>
            
            {%- if page_id == 'post' and toc_html -%}
                <div class="toc-area">
                    <h3>文章目录</h3>
                    {{toc_html | safe}}
                </div>
            {%- endif -%}
        </div>
    </main>
    
    <footer>
        <div class="footer-content">
            <p class="copyright-info">&copy; {{current_year}} {{blog_author}}.</p>
            <p class="build-info"> 
                <span>{{footer_time_info}}</span>
            </p>
            <p class="footer-links">
                <a href="#main-content" class="back-to-top">回到顶部 ↑</a> | 
                <a href="{{site_root}}/rss.xml">RSS Feed</a>
            </p>
        </div>
    </footer>
</body>
</html>
