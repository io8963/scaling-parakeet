<!DOCTYPE html>
<html lang="{{lang}}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{page_title}} - {{blog_title}}</title>
    <meta name="description" content="{{blog_description}}">
    <meta name="author" content="{{blog_author}}">
    <link rel="canonical" href="{{canonical_url}}">
    <link rel="stylesheet" href="{{site_root}}/assets/{{css_filename}}"> 
    <link rel="alternate" type="application/rss+xml" title="{{blog_title}} RSS Feed" href="{{site_root}}/rss.xml">

    {%- if json_ld_schema -%}
    <script type="application/ld+json">
    {{ json_ld_schema | safe }}
    </script>
    {%- endif -%}

</head>
<body class="page-{{page_id}}">
    <header>
        <div class="header-inner">
            <a href="{{site_root}}/" class="site-title">{{blog_title}}</a>
            <nav>
                <a href="{{site_root}}/" {% if page_id == 'index' %}class="active-nav-link"{% endif %}>首页</a>
                <a href="{{site_root}}/archive.html" {% if page_id == 'archive' %}class="active-nav-link"{% endif %}>归档</a>
                <a href="{{site_root}}/tags.html" {% if page_id == 'tags' %}class="active-nav-link"{% endif %}>标签</a>
                <a href="{{site_root}}/about.html" {% if page_id == 'about' %}class="active-nav-link"{% endif %}>关于</a>
            </nav>
        </div>
    </header>
    
    <main id="main-content">
        <div class="main-layout">
            <div class="content-area">
                <div class="page-header">
                    {{main_title_html | safe}}
                    {%- if page_id == 'post' -%}
                        <div class="post-meta">
                            <span class="meta-date">发布于 {{post_date}}</span>
                            {% if post_tags %}
                                <div class="meta-tags">
                                    <span class="meta-tags-label">标签:</span> 
                                    <ul class="tags-list">
                                    {% for tag in post_tags %}
                                        <li><a href="{{site_root}}/tags/{{tag.slug}}.html" class="tag-badge">{{tag.name}}</a></li>
                                    {% endfor %}
                                    </ul>
                                </div>
                            {% endif %}
                        </div>
                    {%- endif -%}
                </div>
                
      {%- if page_id in ['index', 'tag'] -%} 
                    <ul class="post-list">
                    {% for post in posts %}
                        <a href="{{site_root}}{{post.link}}">
                            <li class="post-list-item">
                            ... (列表项详细内容) ...
                            </li>
                        </a>
                    {% endfor %}
                    </ul>
                    
                    {# 只有首页才显示查看全部归档的链接 #}
                    {%- if page_id == 'index' and posts|length == max_posts_on_index -%}
                    <div class="read-more-link-area">
                        <a href="{{site_root}}/archive.html" class="button button-secondary">查看全部归档 &raquo;</a>
                    </div>
                    {%- endif -%}
                {%- else -%}
                    {{content_html | safe}}
                {%- endif -%}
                
            </div>
            
            {%- if page_id == 'post' and toc_html -%}
                <div class="toc-area">
                    <h3>文章目录</h3>
                    {{toc_html | safe}}
                </div>
            {%- endif -%}
        </div>
    </main>
    
    <footer>
        <div class="footer-content">
            <p class="copyright-info">&copy; {{current_year}} {{blog_author}}.</p>
            <p class="build-info"> 
                <span>{{footer_time_info}}</span>
            </p>
            <p class="footer-links">
                <a href="#main-content" class="back-to-top">回到顶部 ↑</a> | 
                <a href="{{site_root}}/rss.xml">RSS Feed</a>
            </p>
        </div>
    </footer>
</body>
</html>
